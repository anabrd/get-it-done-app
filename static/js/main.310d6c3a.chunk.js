(this["webpackJsonpto-do-mern"]=this["webpackJsonpto-do-mern"]||[]).push([[0],{100:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(10),o=a.n(c),r=(a(93),a(11)),i=a(14),l=a(108),d=a(137),j=a(158),u=a(162),b=a(138),h=a(140),p=a(141),O=a(144),g=a(145),f=a(142),m=a(143),x=a(2);function k(e){var t=e.setRegisterLoginToggle,a=Object(s.useState)(""),n=Object(r.a)(a,2),c=n[0],o=n[1],k=Object(s.useState)(!1),y=Object(r.a)(k,2),T=y[0],v=y[1],S=Object(s.useState)(!1),w=Object(r.a)(S,2),C=w[0],F=w[1],N=Object(i.f)(),P={},I=function(e){P[e.target.id]=e.target.value,console.log(P)};return Object(x.jsxs)(l.a,{elevation:2,className:"authForm-wrapper",children:[Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),F(!0),o(""),console.log(P);var t={email:P.email,pass:P.pass};t.pass||(t.pass="");var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("https://getitdone-backend-app.herokuapp.com/auth/login",a).then((function(e){return e.json().then((function(e){"failed"===e.status?o(e.message):(o(e.message),localStorage.setItem("token",e.data),N.push("/home")),F(!1)}))}))},className:"authForm",children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{id:"email",label:"Email","aria-describedby":"my-helper-text",autoFocus:!0,required:!0,onChange:I})}),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(u.a,{htmlFor:"pass",required:!0,children:"Password"}),Object(x.jsx)(b.a,{id:"pass",label:"Password",onChange:I,value:P.pass,autoComplete:"current-password",type:T?"text":"password",endAdornment:Object(x.jsx)(h.a,{position:"end",children:Object(x.jsx)(p.a,{"aria-label":"toggle password visibility",onClick:function(){v((function(e){return!e}))},children:T?Object(x.jsx)(f.a,{}):Object(x.jsx)(m.a,{})})})})]}),Object(x.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",children:"Login"})]}),Object(x.jsxs)("p",{children:["New here?",Object(x.jsx)("span",{style:{textDecoration:"underline",display:"block",cursor:"pointer"},onClick:function(){return t(!1)},children:"Register"})]}),Object(x.jsx)("p",{children:c}),C&&Object(x.jsx)(g.a,{color:"secondary"})]})}var y=a(139);var T=function(e){var t=e.setRegisterLoginToggle,a=Object(s.useState)(!1),n=Object(r.a)(a,2),c=n[0],o=n[1],i=Object(s.useState)(!1),k=Object(r.a)(i,2),T=(k[0],k[1]),v=Object(s.useState)(!1),S=Object(r.a)(v,2),w=S[0],C=S[1],F=Object(s.useState)(""),N=Object(r.a)(F,2),P=N[0],I=N[1],E=Object(s.useState)(""),B=Object(r.a)(E,2),M=B[0],L=B[1],R=Object(s.useState)(""),D=Object(r.a)(R,2),A=D[0],J=D[1],_=Object(s.useState)(!1),q=Object(r.a)(_,2),W=q[0],H=q[1],K=Object(s.useState)(!1),z=Object(r.a)(K,2),G=z[0],Q=z[1],U={},V=function(e){U[e.target.id]=e.target.value,o(!1),C(!1),I(""),console.log(U)},X=function(e){e.preventDefault(),I(""),L(""),J(""),Q(!0);var a={email:U.email,pass:U.pass};if(a.pass)if(a.pass!==U.passConf)o(!0),I("Please make sure the passwords match.");else{var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};console.log(s),fetch("https://getitdone-backend-app.herokuapp.com/auth/register",s).then((function(e){return e.json().then((function(e){"failed"==e.status?(L(e.message),C(!0),Q(!1)):(T(!0),J("Welcome aboard! Redirecting to login..."),setTimeout((function(){t(!0),Q(!1)}),2e3))}))}))}else o(!0),I("Please enter a password.")};return Object(x.jsxs)(l.a,{elevation:2,className:"authForm-wrapper",children:[Object(x.jsxs)("form",{onSubmit:X,className:"authForm",children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(j.a,{id:"email",label:"Email","aria-describedby":"my-helper-text",autoFocus:"true",required:"true",error:w,helperText:M,onChange:V})}),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(u.a,{htmlFor:"pass",required:!0,children:"Password"}),Object(x.jsx)(b.a,{id:"pass",label:"Password",onChange:V,value:U.pass,type:W?"text":"password",endAdornment:Object(x.jsx)(h.a,{position:"end",children:Object(x.jsx)(p.a,{"aria-label":"toggle password visibility",onClick:function(){H((function(e){return!e}))},children:W?Object(x.jsx)(f.a,{}):Object(x.jsx)(m.a,{})})})})]}),Object(x.jsxs)(d.a,{children:[Object(x.jsx)(u.a,{htmlFor:"passConf",required:!0,children:"Confirm Password"}),Object(x.jsx)(b.a,{id:"passConf",label:"Confirm Password",error:c,helperText:P,onChange:V,value:U.passConf,type:W?"text":"password"}),Object(x.jsx)(y.a,{id:"passConfErr",children:P})]}),Object(x.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",onClick:function(){return X},children:"Register"})]}),Object(x.jsxs)("p",{children:["Have an account?",Object(x.jsx)("span",{style:{textDecoration:"underline",display:"block",cursor:"pointer"},onClick:function(){return t(!0)},children:"Log In"})]}),Object(x.jsx)("p",{children:A}),G&&Object(x.jsx)(g.a,{color:"secondary"})]})};var v=function(){var e=Object(s.useState)(!0),t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(x.jsxs)("div",{className:"main",style:{display:"block"},children:[Object(x.jsx)("h1",{children:"get it done"}),a?Object(x.jsx)(k,{setRegisterLoginToggle:n}):Object(x.jsx)(T,{setRegisterLoginToggle:n})]})},S=a(59),w=a(24),C=a(58),F=a(159),N=a(151),P=a(152),I=a(146),E=a(147),B=a(148),M=a(149),L=a(150),R=a(161),D=Object(I.a)({root:{boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"#330745",padding:"2%",margin:"2% auto",width:"500px"},checkBox:{fill:"#330745"},label:{width:"500px"}});var A=function(e){var t=e.task,a=e.deleteTask,s=e.updateFormToggle,n=e.setMessage,c=e.displayMessage,o=D();return Object(x.jsx)(E.a,{item:!0,children:Object(x.jsx)(B.a,{className:o.root,children:Object(x.jsxs)(M.a,{children:[Object(x.jsx)(L.a,{control:Object(x.jsx)(R.a,{className:o.checkBox,onChange:function(){return function(e){t.isFinished=!e;var a=Object(w.a)({},t),s={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(a)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/status",s).then((function(e){return e.json().then((function(e){"success"==e.status?(a.isFinished?n(e.message):n("Back to the drawing board."),c()):console.log(e.message)}))})).catch((function(e){return console.log(e)}))}(t.isFinished)},checked:!!t.isFinished}),label:t.title,labelPlacement:"left",style:t.isFinished?{textDecoration:"line-through",color:"darkgray"}:null,classes:o.label}),Object(x.jsxs)(F.a,{children:[!t.isFinished&&Object(x.jsx)(N.a,{onClick:function(){return s("edit",t)},children:"Edit"}),Object(x.jsx)(P.a,{onClick:function(){return a(t._id)},children:"Delete"})]})]})})})},J=a.p+"static/media/empty-box.a72ddfc2.png";var _=function(e){var t=e.tasks,a=e.setTasks,s=e.updateFormToggle,n=e.deleteTask,c=e.setMessage,o=e.displayMessage,i=t.map((function(e,t){return Object(x.jsx)(C.b,{draggableId:e._id,index:t,children:function(t){return Object(x.jsx)("div",Object(w.a)(Object(w.a)(Object(w.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(x.jsx)(A,{task:e,deleteTask:n,updateFormToggle:s,setMessage:c,displayMessage:o})}),e._id)}},e._id)}));return Object(x.jsx)(F.a,{container:!0,justify:"center",style:{padding:"3%"},children:0===t.length?Object(x.jsxs)("div",{className:"empty-box-wrapper",children:[Object(x.jsx)("img",{className:"empty-box",src:J}),Object(x.jsx)("p",{children:"Nothing here yet!"})]}):Object(x.jsx)(C.a,{onDragEnd:function(e){if(e.destination){var s=Array.from(t),n=s.splice(e.source.index,1),c=Object(r.a)(n,1)[0];s.splice(e.destination.index,0,c),console.log("reorderedtasks before foreach",s),s.forEach((function(e,t){return e.orderId=t})),console.log("reorderedtasks after foreach",s),a(s);var o={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(s)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/order",o).then((function(e){return e.json().then((function(e){"success"==e.status?console.log("OK"):console.log("Not OK")}))})).catch((function(e){return console.log(e)}))}},children:Object(x.jsx)(C.c,{droppableId:"tasks",children:function(e){return Object(x.jsxs)("div",Object(w.a)(Object(w.a)({},e.droppableProps),{},{ref:e.innerRef,children:[i,e.placeholder]}))}})})})},q=a(163),W=a(154),H=a(155),K=a(156);var z=function(e){var t;return t=e.currentTask?{title:"Edit Task",text:"Change of plans?",label:e.currentTask.title,placeholder:e.currentTask.title,submitBtn:"Save Changes",cancelBtn:"Cancel"}:{title:"Add New Task",text:"What's your plan?",label:"Enter Task",placeholder:"What's your plan?",submitBtn:"Add Task",cancelBtn:"Cancel"},Object(x.jsxs)(q.a,{open:e.setFormToggle,fullWidth:"true",children:[Object(x.jsx)(W.a,{children:t.title}),Object(x.jsx)(H.a,{children:Object(x.jsx)(j.a,{autoFocus:!0,fullwidth:!0,id:"standard-basic",label:t.text,placeholder:t.label,onChange:function(t){"add"==e.formAction?e.setNewTask({title:t.target.value,isFinished:!1}):e.setNewTask(Object(w.a)(Object(w.a)({},e.currentTask),{},{title:t.target.value}))}})}),Object(x.jsxs)(K.a,{children:[Object(x.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",onClick:"add"==e.formAction?e.addTask:e.editTaskTitle,children:t.submitBtn}),Object(x.jsx)(O.a,{variant:"outlined",color:"primary",onClick:function(){return e.setFormToggle(!1)},children:t.cancelBtn})]})]})},G=a(153),Q=a(66);var U=function(e){var t=e.message,a=e.showMessage,s=t;return Object(x.jsx)(G.a,{in:a,className:"message",children:Object(x.jsx)(Q.a,{children:s})})},V=(a(100),a(157)),X=a(78),Y=a.n(X);a(101);var Z=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)([]),o=Object(r.a)(c,2),l=o[0],d=o[1],j=Object(s.useState)({}),u=Object(r.a)(j,2),b=u[0],h=u[1],p=Object(s.useState)(),O=Object(r.a)(p,2),f=O[0],m=O[1],k=Object(s.useState)(null),y=Object(r.a)(k,2),T=y[0],v=y[1],w=Object(s.useState)(!0),C=Object(r.a)(w,2),N=C[0],P=C[1],I=Object(s.useState)(""),E=Object(r.a)(I,2),B=E[0],M=E[1],L=Object(s.useState)(!1),R=Object(r.a)(L,2),D=R[0],A=R[1],J=Object(s.useState)(localStorage.getItem("token")),q=Object(r.a)(J,2),W=q[0],H=(q[1],Object(i.f)()),K=function(e,t){v(e),m(t),n((function(e){return!e}))},G=function(){A(!0),setTimeout((function(){A(!1)}),3e3)};return Object(s.useEffect)((function(){fetch("https://getitdone-backend-app.herokuapp.com/tasks/all",{headers:{"x-auth-token":W}}).then((function(e){return e.json().then((function(e){"success"==e.status?(e.data.sort((function(e,t){return e.orderId>t.orderId?1:t.orderId>e.orderId?-1:0})),d(e.data),P(!1)):"failed"==e.status&&(P(!1),H.push("/auth"))}))})).catch((function(e){console.log(e),P(!1),M("Sorry, there seems to be something wrong with your request.")}))}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(F.a,{className:"main",display:"flex",children:[Object(x.jsxs)("div",{className:"info-wrapper",children:[Object(x.jsx)("h1",{children:"get it done"}),Object(x.jsx)("h3",{children:"What's on for today?"}),Object(x.jsx)("p",{className:"tip",children:"(\ud83d\udca1 Tip: Rearrange your tasks with drag&drop.)"}),Object(x.jsx)(V.a,{color:"primary","aria-label":"add",style:{marginBottom:"3%"},onClick:function(){return K("add")},children:Object(x.jsx)(Y.a,{})}),Object(x.jsx)(U,{message:B,showMessage:D}),Object(x.jsx)("p",{className:"logout",onClick:function(){console.log("logout works"),localStorage.removeItem("token"),H.push("/")},children:"Logout"})]}),Object(x.jsx)("div",{className:"task-wrapper",children:N?Object(x.jsx)(g.a,{color:"secondary"}):Object(x.jsx)(_,{className:"taskWrapper",tasks:l,setTasks:d,deleteTask:function(e){var t="https://getitdone-backend-app.herokuapp.com/tasks/"+e,a={method:"DELETE",headers:{"x-auth-token":localStorage.getItem("token")}};fetch(t,a).then((function(e){return e.json().then((function(e){var t;"success"===e.status?(t=l.filter((function(t){return t._id!==e.data})),d(t),M(e.message),G()):(M(e.message),G())}))})).catch((function(e){return console.log(e)}))},updateFormToggle:K,setMessage:M,displayMessage:G})})]}),a&&Object(x.jsx)(z,{setFormToggle:n,updateFormToggle:K,formAction:T,currentTask:f,addTask:function(){n(!1);var e={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(b)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/new",e).then((function(e){return e.json().then((function(e){"success"==e.status?(d([].concat(Object(S.a)(l),[e.data])),h({}),M(e.message),G()):(M(e.message),G())}))})).catch((function(e){return M(e)}))},editTaskTitle:function(){n(!1);var e={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(b)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/title",e).then((function(e){return e.json().then((function(e){if("success"===e.status){var t=[];(t=Object(S.a)(l))[l.findIndex((function(t){return t._id==e.data._id}))]=e.data,d(Object(S.a)(t)),M(e.message),G()}else M(e.message),G()}))})).catch((function(e){return console.log(e)}))},newTask:b,tasks:l,setNewTask:h,setTasks:d})]})};var $=function(){return Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{path:"/home",children:Object(x.jsx)(Z,{})}),Object(x.jsx)(i.a,{path:"/auth",children:Object(x.jsx)(v,{})}),Object(x.jsx)(i.a,{path:"/",children:Object(x.jsx)(v,{})})]})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,165)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),c(e),o(e)}))},te=a(48);o.a.render(Object(x.jsx)(te.a,{basename:"/get-it-done-app/",children:Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)($,{})})}),document.getElementById("root")),ee()},93:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.310d6c3a.chunk.js.map