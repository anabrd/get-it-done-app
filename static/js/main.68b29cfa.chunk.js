(this["webpackJsonpto-do-mern"]=this["webpackJsonpto-do-mern"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(10),o=a.n(c),r=(a(92),a(11)),i=a(14),l=a(107),d=a(135),u=a(150),j=a(136),h=a(3);function b(e){var t=e.setRegisterLoginToggle,a=Object(n.useState)(""),s=Object(r.a)(a,2),c=s[0],o=s[1],b=Object(i.f)(),p={},g=function(e){p[e.target.id]=e.target.value,console.log(p)};return Object(h.jsxs)(l.a,{elevation:2,className:"authForm-wrapper",children:[Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(p);var t={email:p.email,pass:p.pass},a="https://getitdone-backend-app.herokuapp.com/auth/login",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};console.log(t,a,n),fetch(a,n).then((function(e){return e.json().then((function(e){"failed"==e.status?o(e.message):(o(e.message),localStorage.setItem("token",e.data),b.push("/home"))}))}))},className:"authForm",children:[Object(h.jsx)(d.a,{children:Object(h.jsx)(u.a,{id:"email",label:"Email","aria-describedby":"my-helper-text",autoFocus:"true",required:"true",onChange:g})}),Object(h.jsx)(d.a,{children:Object(h.jsx)(u.a,{id:"pass",label:"Password",required:"true",onChange:g})}),Object(h.jsx)(j.a,{type:"submit",variant:"contained",color:"secondary",children:"Login"})]}),Object(h.jsxs)("p",{children:["New here?",Object(h.jsx)("span",{style:{textDecoration:"underline",display:"block",cursor:"pointer"},onClick:function(){return t(!1)},children:"Register"})]}),Object(h.jsx)("p",{children:c})]})}var p=function(e){var t=e.setRegisterLoginToggle,a=Object(n.useState)(!1),s=Object(r.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(!1),b=Object(r.a)(i,2),p=(b[0],b[1]),g=Object(n.useState)(!1),O=Object(r.a)(g,2),f=O[0],m=O[1],x=Object(n.useState)(""),k=Object(r.a)(x,2),T=k[0],y=k[1],v=Object(n.useState)(""),S=Object(r.a)(v,2),C=S[0],w=S[1],F=Object(n.useState)(""),N=Object(r.a)(F,2),I=N[0],P=N[1],B=Object(n.useState)({email:"",pass:"",passConf:""}),E=Object(r.a)(B,2),M=E[0],L=(E[1],function(e){M[e.target.id]=e.target.value,o(!1),m(!1),y(""),console.log(M)}),R=function(e){if(e.preventDefault(),M.pass!==M.passConf)o(!0),y("Please make sure the passwords match.");else{var a={email:M.email,pass:M.pass},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};console.log(n),fetch("https://getitdone-backend-app.herokuapp.com/auth/register",n).then((function(e){return e.json().then((function(e){"failed"==e.status?(w(e.message),m(!0)):(p(!0),P(e.message+"\u2705 Redirecting to login page..."),setTimeout((function(){t(!0)}),3e3))}))}))}};return Object(h.jsxs)(l.a,{elevation:2,className:"authForm-wrapper",children:[Object(h.jsxs)("form",{onSubmit:R,className:"authForm",children:[Object(h.jsx)(d.a,{children:Object(h.jsx)(u.a,{id:"email",label:"Email","aria-describedby":"my-helper-text",autoFocus:"true",required:"true",error:f,helperText:C,onChange:L})}),Object(h.jsx)(d.a,{children:Object(h.jsx)(u.a,{id:"pass",label:"Password",required:"true",onChange:L})}),Object(h.jsx)(d.a,{children:Object(h.jsx)(u.a,{id:"passConf",label:"Confirm Password",required:"true",error:c,helperText:T,onChange:L})}),Object(h.jsx)(j.a,{type:"submit",variant:"contained",color:"secondary",onClick:function(){return R},children:"Register"})]}),Object(h.jsxs)("p",{children:["Have an account?",Object(h.jsx)("span",{style:{textDecoration:"underline",display:"block",cursor:"pointer"},onClick:function(){return t(!0)},children:"Log In"})]}),Object(h.jsx)("p",{children:I})]})};var g=function(){var e=Object(n.useState)(!0),t=Object(r.a)(e,2),a=t[0],s=t[1];return Object(h.jsxs)("div",{className:"main",style:{display:"block"},children:[Object(h.jsx)("h1",{children:"get it done"}),a?Object(h.jsx)(b,{setRegisterLoginToggle:s}):Object(h.jsx)(p,{setRegisterLoginToggle:s})]})},O=a(58),f=a(23),m=a(57),x=a(151),k=a(142),T=a(143),y=a(137),v=a(138),S=a(139),C=a(140),w=a(141),F=a(153),N=Object(y.a)({root:{boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"#330745",padding:"2%",margin:"2% auto",width:"500px"},checkBox:{fill:"#330745"},label:{width:"500px"}});var I=function(e){var t=e.task,a=e.deleteTask,n=e.updateFormToggle,s=e.setMessage,c=e.displayMessage,o=N();return Object(h.jsx)(v.a,{item:!0,children:Object(h.jsx)(S.a,{className:o.root,children:Object(h.jsxs)(C.a,{children:[Object(h.jsx)(w.a,{control:Object(h.jsx)(F.a,{className:o.checkBox,onChange:function(){return function(e){t.isFinished=!e;var a=Object(f.a)({},t),n={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(a)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/status",n).then((function(e){return e.json().then((function(e){"success"==e.status?(a.isFinished?s(e.message):s("Back to the drawing board."),c()):console.log(e.message)}))})).catch((function(e){return console.log(e)}))}(t.isFinished)},checked:!!t.isFinished}),label:t.title,labelPlacement:"left",style:t.isFinished?{textDecoration:"line-through",color:"darkgray"}:null,classes:o.label}),Object(h.jsxs)(x.a,{children:[!t.isFinished&&Object(h.jsx)(k.a,{onClick:function(){return n("edit",t)},children:"Edit"}),Object(h.jsx)(T.a,{onClick:function(){return a(t._id)},children:"Delete"})]})]})})})};var P=function(e){var t=e.tasks,a=e.setTasks,n=e.updateFormToggle,s=e.deleteTask,c=e.setMessage,o=e.displayMessage,i=t.map((function(e,t){return Object(h.jsx)(m.b,{draggableId:e._id,index:t,children:function(t){return Object(h.jsx)("div",Object(f.a)(Object(f.a)(Object(f.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(h.jsx)(I,{task:e,deleteTask:s,updateFormToggle:n,setMessage:c,displayMessage:o})}),e._id)}},e._id)}));return Object(h.jsx)(x.a,{container:!0,justify:"center",style:{padding:"3%"},children:Object(h.jsx)(m.a,{onDragEnd:function(e){if(e.destination){var n=Array.from(t),s=n.splice(e.source.index,1),c=Object(r.a)(s,1)[0];n.splice(e.destination.index,0,c),console.log("reorderedtasks before foreach",n),n.forEach((function(e,t){return e.orderId=t})),console.log("reorderedtasks after foreach",n),a(n);var o={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(n)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/order",o).then((function(e){return e.json().then((function(e){"success"==e.status?console.log("OK"):console.log("Not OK")}))})).catch((function(e){return console.log(e)}))}},children:Object(h.jsx)(m.c,{droppableId:"tasks",children:function(e){return Object(h.jsxs)("div",Object(f.a)(Object(f.a)({},e.droppableProps),{},{ref:e.innerRef,children:[i,e.placeholder]}))}})})})},B=a(154),E=a(145),M=a(146),L=a(147);var R=function(e){var t;return t=e.currentTask?{title:"Edit Task",text:"Change of plans?",label:e.currentTask.title,placeholder:e.currentTask.title,submitBtn:"Save Changes",cancelBtn:"Cancel"}:{title:"Add New Task",text:"What's your plan?",label:"Enter Task",placeholder:"What's your plan?",submitBtn:"Add Task",cancelBtn:"Cancel"},Object(h.jsxs)(B.a,{open:e.setFormToggle,fullWidth:"true",children:[Object(h.jsx)(E.a,{children:t.title}),Object(h.jsx)(M.a,{children:Object(h.jsx)(u.a,{autoFocus:!0,fullwidth:!0,id:"standard-basic",label:t.text,placeholder:t.label,onChange:function(t){"add"==e.formAction?e.setNewTask({title:t.target.value,isFinished:!1}):e.setNewTask(Object(f.a)(Object(f.a)({},e.currentTask),{},{title:t.target.value}))}})}),Object(h.jsxs)(L.a,{children:[Object(h.jsx)(j.a,{type:"submit",variant:"contained",color:"primary",onClick:"add"==e.formAction?e.addTask:e.editTaskTitle,children:t.submitBtn}),Object(h.jsx)(j.a,{variant:"outlined",color:"primary",onClick:function(){return e.setFormToggle(!1)},children:t.cancelBtn})]})]})},D=a(144),J=a(74);var _=function(e){var t=e.message,a=e.showMessage,n=t;return Object(h.jsx)(D.a,{in:a,className:"message",children:Object(h.jsx)(J.a,{children:n})})},q=(a(99),a(148)),A=a(149),W=a(72),H=a.n(W);a(100);var K=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)([]),o=Object(r.a)(c,2),l=o[0],d=o[1],u=Object(n.useState)({}),j=Object(r.a)(u,2),b=j[0],p=j[1],g=Object(n.useState)(),f=Object(r.a)(g,2),m=f[0],k=f[1],T=Object(n.useState)(null),y=Object(r.a)(T,2),v=y[0],S=y[1],C=Object(n.useState)(!0),w=Object(r.a)(C,2),F=w[0],N=w[1],I=Object(n.useState)(""),B=Object(r.a)(I,2),E=B[0],M=B[1],L=Object(n.useState)(!1),D=Object(r.a)(L,2),J=D[0],W=D[1],K=Object(n.useState)(localStorage.getItem("token")),z=Object(r.a)(K,2),G=z[0],Q=(z[1],Object(i.f)()),U=function(e,t){S(e),k(t),s((function(e){return!e}))},V=function(){W(!0),setTimeout((function(){W(!1)}),3e3)};return Object(n.useEffect)((function(){fetch("https://getitdone-backend-app.herokuapp.com/tasks/all",{headers:{"x-auth-token":G}}).then((function(e){return e.json().then((function(e){"success"==e.status?(e.data.sort((function(e,t){return e.orderId>t.orderId?1:t.orderId>e.orderId?-1:0})),d(e.data),N(!1)):"failed"==e.status&&(N(!1),Q.push("/auth"))}))})).catch((function(e){console.log(e),N(!1),M("Sorry, there seems to be something wrong with your request.")}))}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(x.a,{className:"main",display:"flex",children:[Object(h.jsxs)("div",{className:"info-wrapper",children:[Object(h.jsx)("h1",{children:"get it done"}),Object(h.jsx)("h3",{children:"What's on for today?"}),Object(h.jsx)("p",{className:"tip",children:"(\ud83d\udca1 Tip: Rearrange your tasks with drag&drop.)"}),Object(h.jsx)(q.a,{color:"primary","aria-label":"add",style:{marginBottom:"3%"},onClick:function(){return U("add")},children:Object(h.jsx)(H.a,{})}),Object(h.jsx)(_,{message:E,showMessage:J}),Object(h.jsx)("p",{className:"logout",onClick:function(){console.log("logout works"),localStorage.removeItem("token"),Q.push("/")},children:"Logout"})]}),Object(h.jsx)("div",{className:"task-wrapper",children:F?Object(h.jsx)(A.a,{color:"secondary"}):Object(h.jsx)(P,{className:"taskWrapper",tasks:l,setTasks:d,deleteTask:function(e){var t="https://getitdone-backend-app.herokuapp.com/tasks/"+e,a={method:"DELETE",headers:{"x-auth-token":localStorage.getItem("token")}};fetch(t,a).then((function(e){return e.json().then((function(e){var t;"success"===e.status?(t=l.filter((function(t){return t._id!==e.data})),d(t),M(e.message),V()):(M(e.message),V())}))})).catch((function(e){return console.log(e)}))},updateFormToggle:U,setMessage:M,displayMessage:V})})]}),a&&Object(h.jsx)(R,{setFormToggle:s,updateFormToggle:U,formAction:v,currentTask:m,addTask:function(){s(!1);var e={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(b)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/new",e).then((function(e){return e.json().then((function(e){"success"==e.status?(d([].concat(Object(O.a)(l),[e.data])),p({}),M(e.message),V()):(M(e.message),V())}))})).catch((function(e){return M(e)}))},editTaskTitle:function(){s(!1);var e={method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(b)};fetch("https://getitdone-backend-app.herokuapp.com/tasks/title",e).then((function(e){return e.json().then((function(e){if("success"===e.status){var t=[];(t=Object(O.a)(l))[l.findIndex((function(t){return t._id==e.data._id}))]=e.data,d(Object(O.a)(t)),M(e.message),V()}else M(e.message),V()}))})).catch((function(e){return console.log(e)}))},newTask:b,tasks:l,setNewTask:p,setTasks:d})]})};var z=function(){return Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/home",children:Object(h.jsx)(K,{})}),Object(h.jsx)(i.a,{path:"/auth",children:Object(h.jsx)(g,{})}),Object(h.jsx)(i.a,{path:"/",children:Object(h.jsx)(g,{})})]})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,156)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),c(e),o(e)}))},Q=a(47);o.a.render(Object(h.jsx)(Q.a,{basename:"/get-it-done-app/",children:Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(z,{})})}),document.getElementById("root")),G()},92:function(e,t,a){},99:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.68b29cfa.chunk.js.map